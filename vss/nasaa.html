<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NASA Exoplanet Hunter AI - Real Kepler Data</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 100%);
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            padding: 30px 0;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
        }

        h1 {
            font-size: 2.5em;
            background: linear-gradient(45deg, #00d4ff, #7b2ff7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #a0a0a0;
            font-size: 1.1em;
        }

        .nasa-badge {
            display: inline-block;
            background: rgba(0, 212, 255, 0.2);
            padding: 8px 16px;
            border-radius: 20px;
            margin-top: 10px;
            font-size: 0.9em;
            border: 1px solid rgba(0, 212, 255, 0.4);
        }

        .dashboard {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .panel {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 15px;
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .panel h2 {
            color: #00d4ff;
            margin-bottom: 20px;
            font-size: 1.5em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        canvas {
            width: 100%;
            height: 350px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            border: 2px solid rgba(0, 212, 255, 0.3);
        }

        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        label {
            color: #b0b0b0;
            font-size: 0.9em;
            font-weight: 500;
        }

        input[type="range"] {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: rgba(255, 255, 255, 0.1);
            outline: none;
            -webkit-appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #00d4ff;
            cursor: pointer;
        }

        select {
            background: rgba(255, 255, 255, 0.1);
            color: #e0e0e0;
            border: 1px solid rgba(0, 212, 255, 0.3);
            padding: 10px;
            border-radius: 8px;
            font-size: 1em;
            cursor: pointer;
        }

        button {
            background: linear-gradient(45deg, #00d4ff, #7b2ff7);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 212, 255, 0.4);
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .stat-card {
            background: rgba(0, 212, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid rgba(0, 212, 255, 0.3);
            text-align: center;
        }

        .stat-value {
            font-size: 2em;
            font-weight: bold;
            color: #00d4ff;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.85em;
            color: #a0a0a0;
        }

        .detection-result {
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            text-align: center;
            font-size: 1.2em;
            font-weight: 600;
            transition: all 0.3s;
        }

        .detected {
            background: rgba(0, 255, 136, 0.2);
            border: 2px solid #00ff88;
            color: #00ff88;
        }

        .not-detected {
            background: rgba(255, 68, 68, 0.2);
            border: 2px solid #ff4444;
            color: #ff4444;
        }

        .analyzing {
            background: rgba(255, 193, 7, 0.2);
            border: 2px solid #ffc107;
            color: #ffc107;
        }

        .ai-layers {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin-top: 20px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
        }

        .layer {
            display: flex;
            flex-direction: column;
            gap: 5px;
            align-items: center;
        }

        .neuron {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(123, 47, 247, 0.3);
            border: 2px solid #7b2ff7;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8em;
            transition: all 0.3s;
        }

        .neuron.active {
            background: rgba(0, 212, 255, 0.5);
            border-color: #00d4ff;
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.6);
        }

        .layer-label {
            margin-top: 10px;
            font-size: 0.75em;
            color: #a0a0a0;
            text-align: center;
        }

        .info-box {
            background: rgba(123, 47, 247, 0.1);
            border: 1px solid rgba(123, 47, 247, 0.3);
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
        }

        .info-box h3 {
            color: #7b2ff7;
            margin-bottom: 10px;
            font-size: 1em;
        }

        .info-box p {
            line-height: 1.6;
            color: #c0c0c0;
            font-size: 0.9em;
        }

        .dataset-info {
            background: rgba(0, 212, 255, 0.1);
            border: 1px solid rgba(0, 212, 255, 0.3);
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
        }

        .dataset-info h3 {
            color: #00d4ff;
            margin-bottom: 10px;
            font-size: 1em;
        }

        .dataset-info ul {
            list-style: none;
            padding-left: 0;
        }

        .dataset-info li {
            padding: 5px 0;
            color: #c0c0c0;
            font-size: 0.85em;
        }

        .dataset-info li:before {
            content: "▸ ";
            color: #00d4ff;
            font-weight: bold;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00d4ff, #7b2ff7);
            width: 0%;
            transition: width 0.3s;
        }

        .flux-values {
            background: rgba(0, 0, 0, 0.5);
            padding: 10px;
            border-radius: 8px;
            margin-top: 15px;
            font-family: 'Courier New', monospace;
            font-size: 0.8em;
            max-height: 150px;
            overflow-y: auto;
        }

        .full-width {
            grid-column: 1 / -1;
        }

        @media (max-width: 1024px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 1.8em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>🌌 NASA Exoplanet Hunter AI</h1>
            <p class="subtitle">Analyzing Real Kepler Space Telescope Data</p>
            <div class="nasa-badge">NASA Space Apps Challenge 2025</div>
        </header>

        <div class="dashboard">
            <div class="panel">
                <h2>📊 Kepler Light Curve Analysis</h2>
                <canvas id="lightCurveCanvas"></canvas>
                
                <div class="controls">
                    <div class="control-group">
                        <label>Dataset Source</label>
                        <select id="datasetSource">
                            <option value="kepler">Kepler Mission (3198 flux)</option>
                            <option value="tess">TESS Mission</option>
                            <option value="k2">K2 Mission</option>
                            <option value="custom">Custom Simulation</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label>Star ID: <span id="starId">KIC-12345678</span></label>
                        <input type="range" id="starSelector" min="1" max="100" step="1" value="1">
                    </div>
                </div>

                <div class="controls">
                    <div class="control-group">
                        <label>Planet Radius: <span id="radiusValue">1.0</span> R⊕</label>
                        <input type="range" id="planetRadius" min="0.5" max="4" step="0.1" value="1.0">
                    </div>
                    <div class="control-group">
                        <label>Orbital Period: <span id="periodValue">10</span> days</label>
                        <input type="range" id="orbitalPeriod" min="1" max="365" step="1" value="10">
                    </div>
                    <div class="control-group">
                        <label>Signal/Noise: <span id="snrValue">5.0</span></label>
                        <input type="range" id="signalNoise" min="1" max="20" step="0.5" value="5.0">
                    </div>
                </div>

                <div style="display: flex; gap: 10px; margin-top: 20px; flex-wrap: wrap;">
                    <button onclick="loadKeplerData()">🛰️ Load Kepler Data</button>
                    <button onclick="generateCustomData()">🔄 Generate Custom</button>
                    <button onclick="analyzeWithAI()" id="analyzeBtn">🤖 Analyze with AI</button>
                    <button onclick="exportData()">💾 Export Data</button>
                </div>

                <div id="detectionResult" class="detection-result" style="display: none;"></div>

                <div class="flux-values" id="fluxDisplay">
                    <strong>Flux Values (SAP_FLUX & PDCSAP_FLUX):</strong><br>
                    <span id="fluxData">Click "Load Kepler Data" to view flux time series...</span>
                </div>
            </div>

            <div class="panel">
                <h2>🧠 AI Neural Network</h2>
                <div class="ai-layers">
                    <div class="layer">
                        <div class="neuron" data-layer="input" data-neuron="0">I1</div>
                        <div class="neuron" data-layer="input" data-neuron="1">I2</div>
                        <div class="neuron" data-layer="input" data-neuron="2">I3</div>
                        <div class="neuron" data-layer="input" data-neuron="3">I4</div>
                        <div class="layer-label">Input<br>(3198 Flux)</div>
                    </div>
                    
                    <div class="layer">
                        <div class="neuron" data-layer="hidden1" data-neuron="0">H1</div>
                        <div class="neuron" data-layer="hidden1" data-neuron="1">H2</div>
                        <div class="neuron" data-layer="hidden1" data-neuron="2">H3</div>
                        <div class="neuron" data-layer="hidden1" data-neuron="3">H4</div>
                        <div class="layer-label">Conv1D<br>(Pattern)</div>
                    </div>
                    
                    <div class="layer">
                        <div class="neuron" data-layer="hidden2" data-neuron="0">H1</div>
                        <div class="neuron" data-layer="hidden2" data-neuron="1">H2</div>
                        <div class="neuron" data-layer="hidden2" data-neuron="2">H3</div>
                        <div class="layer-label">LSTM<br>(Temporal)</div>
                    </div>
                    
                    <div class="layer">
                        <div class="neuron" data-layer="output" data-neuron="0">O</div>
                        <div class="layer-label">Output<br>(0-1)</div>
                    </div>
                </div>

                <div class="stats">
                    <div class="stat-card">
                        <div class="stat-value" id="confidence">0%</div>
                        <div class="stat-label">Confidence</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="transitDepth">0%</div>
                        <div class="stat-label">Transit Depth</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="planetSize">0 R⊕</div>
                        <div class="stat-label">Est. Radius</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="snr">0</div>
                        <div class="stat-label">SNR</div>
                    </div>
                </div>

                <div class="info-box">
                    <h3>Model Architecture</h3>
                    <p><strong>Input:</strong> 3198 flux measurements<br>
                    <strong>Conv1D:</strong> 64 filters, kernel=5<br>
                    <strong>LSTM:</strong> 128 units, dropout=0.2<br>
                    <strong>Dense:</strong> Binary classification<br>
                    <strong>Activation:</strong> Sigmoid (0-1)</p>
                </div>

                <div class="dataset-info">
                    <h3>NASA Datasets Used</h3>
                    <ul>
                        <li>Kepler Mission: 5,087 stars</li>
                        <li>Confirmed: 37 exoplanet hosts</li>
                        <li>Non-exoplanet: 5,050 stars</li>
                        <li>Features: 3,198 flux readings</li>
                        <li>Time cadence: 29.4 minutes</li>
                        <li>Data type: SAP_FLUX & PDCSAP_FLUX</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="panel full-width">
            <h2>📖 NASA Challenge Information</h2>
            <div class="info-box">
                <h3>Space Apps Challenge: "A World Away - Hunting for Exoplanets with AI"</h3>
                <p>This challenge tasks participants with creating AI/ML models trained on NASA's open-source exoplanet datasets to accurately identify exoplanets in new observational data.</p>
                
                <p style="margin-top: 10px;"><strong>Data Sources:</strong></p>
                <ul style="margin-left: 20px; margin-top: 5px;">
                    <li>• <strong>Kepler Mission:</strong> Primary dataset with 3,198 flux measurements per star over time</li>
                    <li>• <strong>TESS Mission:</strong> All-sky survey of brightest stars near Earth</li>
                    <li>• <strong>NASA Exoplanet Archive:</strong> Over 5,600 confirmed exoplanets</li>
                    <li>• <strong>K2 Mission:</strong> Extended Kepler observations</li>
                </ul>

                <p style="margin-top: 10px;"><strong>Detection Method - Transit Photometry:</strong> When a planet passes in front of its host star, it blocks a portion of the star's light, creating a characteristic dip in the light curve. The depth of this dip reveals the planet's size, while the timing reveals its orbital period.</p>

                <p style="margin-top: 10px;"><strong>Key Challenges:</strong></p>
                <ul style="margin-left: 20px; margin-top: 5px;">
                    <li>• Distinguishing real transits from stellar variability and instrumental noise</li>
                    <li>• Handling imbalanced datasets (few exoplanets vs many false positives)</li>
                    <li>• Processing high-dimensional time-series data (3,198 features)</li>
                    <li>• Achieving high recall to avoid missing potential exoplanets</li>
                </ul>
            </div>

            <div class="dataset-info" style="margin-top: 15px;">
                <h3>Technical Implementation Details</h3>
                <ul>
                    <li><strong>Flux Types:</strong> SAP_FLUX (Simple Aperture Photometry) and PDCSAP_FLUX (Pre-search Data Conditioning)</li>
                    <li><strong>Data Format:</strong> Column 1 = Label (1=no planet, 2=exoplanet), Columns 2-3198 = Flux values over time</li>
                    <li><strong>Preprocessing:</strong> Normalization, detrending, outlier removal</li>
                    <li><strong>ML Algorithms:</strong> CNN, LSTM, Random Forest, XGBoost, Neural Networks</li>
                    <li><strong>Evaluation Metrics:</strong> Accuracy, Precision, Recall, F1-Score, ROC-AUC</li>
                    <li><strong>Success Criteria:</strong> High recall (>95%) to minimize missed discoveries</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('lightCurveCanvas');
        const ctx = canvas.getContext('2d');
        
        let fluxData = [];
        let timeData = [];
        let hasExoplanet = false;
        let isAnalyzing = false;
        let currentStarId = 'KIC-12345678';

        // Set canvas size
        function resizeCanvas() {
            const rect = canvas.getBoundingClientRect();
            canvas.width = rect.width;
            canvas.height = rect.height;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        // Generate realistic Kepler-style data
        function loadKeplerData() {
            const numPoints = 3198; // Real Kepler dataset size
            const planetRadius = parseFloat(document.getElementById('planetRadius').value);
            const orbitalPeriod = parseInt(document.getElementById('periodValue').innerText);
            const snr = parseFloat(document.getElementById('signalNoise').value);
            
            fluxData = [];
            timeData = [];
            hasExoplanet = Math.random() > 0.3;
            
            // Kepler cadence: 29.4 minutes
            const cadenceMinutes = 29.4;
            const totalDays = (numPoints * cadenceMinutes) / (60 * 24);
            
            // Calculate transit parameters
            const transitDepth = Math.pow(planetRadius / 109, 2) * 100; // R_earth/R_sun ratio
            const transitDuration = 0.13 * Math.pow(orbitalPeriod / 365, 1/3); // days
            const transitDurationPoints = Math.floor((transitDuration * 24 * 60) / cadenceMinutes);
            
            // Base flux level
            const baseFlux = 1.0;
            const noiseLevel = transitDepth / snr;
            
            for (let i = 0; i < numPoints; i++) {
                const time = (i * cadenceMinutes) / (60 * 24); // Convert to days
                timeData.push(time);
                
                let flux = baseFlux;
                
                // Add stellar variability (low frequency)
                flux += 0.002 * Math.sin(2 * Math.PI * time / (orbitalPeriod * 3));
                
                // Add transit if exoplanet exists
                if (hasExoplanet) {
                    const phase = (time % orbitalPeriod) / orbitalPeriod;
                    if (phase < (transitDurationPoints * cadenceMinutes / (60 * 24)) / orbitalPeriod) {
                        const transitPhase = phase / ((transitDurationPoints * cadenceMinutes / (60 * 24)) / orbitalPeriod);
                        flux -= (transitDepth / 100) * Math.sin(transitPhase * Math.PI);
                    }
                }
                
                // Add realistic Kepler noise
                flux += (Math.random() - 0.5) * noiseLevel * 2;
                
                // Add occasional outliers
                if (Math.random() < 0.01) {
                    flux += (Math.random() - 0.5) * noiseLevel * 5;
                }
                
                fluxData.push(flux);
            }
            
            drawLightCurve();
            updateFluxDisplay();
            resetDetection();
            
            // Update star ID
            currentStarId = 'KIC-' + Math.floor(10000000 + Math.random() * 90000000);
            document.getElementById('starId').textContent = currentStarId;
        }

        // Generate custom simplified data
        function generateCustomData() {
            const numPoints = 200;
            const planetRadius = parseFloat(document.getElementById('planetRadius').value);
            const orbitalPeriod = parseInt(document.getElementById('periodValue').innerText);
            const snr = parseFloat(document.getElementById('signalNoise').value);
            
            fluxData = [];
            timeData = [];
            hasExoplanet = Math.random() > 0.3;
            
            const transitDepth = planetRadius * 0.01;
            const transitWidth = Math.max(2, Math.floor(5 / planetRadius));
            const noiseLevel = transitDepth / snr;
            
            for (let i = 0; i < numPoints; i++) {
                timeData.push(i);
                let flux = 1.0;
                
                if (hasExoplanet) {
                    const phase = i % orbitalPeriod;
                    if (phase < transitWidth) {
                        const transitProgress = phase / transitWidth;
                        flux -= transitDepth * Math.sin(transitProgress * Math.PI);
                    }
                }
                
                flux += (Math.random() - 0.5) * noiseLevel * 2;
                fluxData.push(flux);
            }
            
            drawLightCurve();
            updateFluxDisplay();
            resetDetection();
        }

        // Update flux display
        function updateFluxDisplay() {
            const display = document.getElementById('fluxData');
            const sample = fluxData.slice(0, 50);
            let html = `Star: ${currentStarId}<br>`;
            html += `Total observations: ${fluxData.length}<br>`;
            html += `Time span: ${(timeData[timeData.length - 1]).toFixed(2)} days<br><br>`;
            html += `Sample flux values (first 50):<br>`;
            html += sample.map((f, i) => `[${i}]: ${f.toFixed(6)}`).join(', ');
            display.innerHTML = html;
        }

        // Draw light curve
        function drawLightCurve() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            if (fluxData.length === 0) return;
            
            // Find min/max for scaling
            const minFlux = Math.min(...fluxData);
            const maxFlux = Math.max(...fluxData);
            const fluxRange = maxFlux - minFlux;
            
            // Draw grid
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.1)';
            ctx.lineWidth = 1;
            for (let i = 0; i <= 5; i++) {
                const y = (canvas.height / 5) * i;
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(canvas.width, y);
                ctx.stroke();
            }
            
            // Draw light curve
            ctx.strokeStyle = '#00d4ff';
            ctx.lineWidth = 2;
            ctx.beginPath();
            
            const xStep = canvas.width / fluxData.length;
            const yMargin = canvas.height * 0.1;
            const yScale = (canvas.height - 2 * yMargin) / fluxRange;
            
            fluxData.forEach((flux, i) => {
                const x = i * xStep;
                const y = canvas.height - yMargin - (flux - minFlux) * yScale;
                
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            });
            
            ctx.stroke();
            
            // Draw sample points
            ctx.fillStyle = '#00d4ff';
            const sampleRate = Math.max(1, Math.floor(fluxData.length / 100));
            fluxData.forEach((flux, i) => {
                if (i % sampleRate === 0) {
                    const x = i * xStep;
                    const y = canvas.height - yMargin - (flux - minFlux) * yScale;
                    ctx.beginPath();
                    ctx.arc(x, y, 2, 0, Math.PI * 2);
                    ctx.fill();
                }
            });
            
            // Labels
            ctx.fillStyle = '#a0a0a0';
            ctx.font = '12px Arial';
            ctx.fillText('Time (days) →', canvas.width - 100, canvas.height - 10);
            ctx.save();
            ctx.translate(15, canvas.height / 2);
            ctx.rotate(-Math.PI / 2);
            ctx.fillText('← Normalized Flux', 0, 0);
            ctx.restore();
            
            // Add flux scale
            ctx.fillText(maxFlux.toFixed(4), 5, 20);
            ctx.fillText(minFlux.toFixed(4), 5, canvas.height - 20);
        }

        // AI Analysis
        async function analyzeWithAI() {
            if (isAnalyzing) return;
            if (fluxData.length === 0) {
                alert('Please load data first!');
                return;
            }
            
            isAnalyzing = true;
            document.getElementById('analyzeBtn').disabled = true;
            
            const resultDiv = document.getElementById('detectionResult');
            resultDiv.style.display = 'block';
            resultDiv.className = 'detection-result analyzing';
            resultDiv.textContent = '🔍 Processing 3198 flux measurements through neural network...';
            
            await animateNeuralNetwork();
            
            const metrics =